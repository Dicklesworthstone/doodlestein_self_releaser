{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/Dicklesworthstone/doodlestein_self_releaser/schemas/config-details.json",
  "title": "DSR Config Details",
  "description": "Details payload for 'dsr config' command",
  "type": "object",
  "required": ["action"],
  "properties": {
    "action": {
      "type": "string",
      "enum": ["show", "get", "set", "init", "validate", "migrate", "edit"],
      "description": "Config subcommand"
    },
    "config_file": {
      "type": "string",
      "description": "Path to config file"
    },
    "schema_version": {
      "type": "string",
      "description": "Config schema version"
    },
    "key": {
      "type": "string",
      "description": "Config key"
    },
    "value": {
      "type": "string",
      "description": "Config value"
    },
    "valid": {
      "type": "boolean",
      "description": "Validation result"
    },
    "errors": {
      "type": "array",
      "items": { "$ref": "#/$defs/config_error" },
      "description": "Validation or migration errors"
    },
    "from_version": {
      "type": "string",
      "description": "Source schema version"
    },
    "to_version": {
      "type": "string",
      "description": "Target schema version"
    },
    "backup_path": {
      "type": "string",
      "description": "Backup file path created during migration"
    },
    "changed_keys": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Keys changed during migration"
    }
  },
  "$defs": {
    "config_error": {
      "type": "object",
      "required": ["code", "message"],
      "properties": {
        "code": { "type": "string" },
        "message": { "type": "string" },
        "key": { "type": "string" }
      }
    }
  }
}
